---
title: "[tesseract] macã§OCRã‚’ã—ã¦ã¿ã‚‹"
emoji: "ğŸ“š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [python,ocr,tesseract]
published: true
---
# ã¯ã˜ã‚ã«
macã§OCRã‚’ã—ã¦ã¿ã‚‹ã€‚
# ç’°å¢ƒ
* System Version: macOS 14.4 (23E214)
* Python 3.12.5
# æ‰‹é †
## 1. tesseractã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
% brew install tesseract
```
## 2. pytesseractã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ç¢ºèª
```bash
% tesseract --version

tesseract 5.4.1
 leptonica-1.84.1
  libgif 5.2.1 : libjpeg 8d (libjpeg-turbo 3.0.0) : libpng 1.6.43 : libtiff 4.6.0 : zlib 1.2.12 : libwebp 1.4.0 : libopenjp2 2.5.2
 Found NEON
 Found libarchive 3.7.4 zlib/1.2.12 liblzma/5.4.6 bz2lib/1.0.8 liblz4/1.9.4 libzstd/1.5.6
 Found libcurl/8.4.0 SecureTransport (LibreSSL/3.3.6) zlib/1.2.12 nghttp2/1.58.0
```
# 3.æ—¥æœ¬èªã«å¯¾å¿œã•ã›ã‚‹
1. ç¾åœ¨æ‰±ãˆã‚‹è¨€èªã®ãƒªã‚¹ãƒˆã¯ä»¥ä¸‹ã§ç¢ºèªã§ãã‚‹
```bash
% tesseract --list-langs|clipcopy

List of available languages in "/opt/homebrew/share/tessdata/" (3):
eng
osd
snum
```
2. æ—¥æœ¬èªã®ç¸¦æ¨ªæ›¸ãã‚’èªè­˜ã™ã‚‹å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹
```bash
% curl -LO https://github.com/tesseract-ocr/tessdata_best/raw/main/jpn.traineddata
% curl -LO https://github.com/tesseract-ocr/tessdata_best/raw/main/jpn_vert.traineddata
```
3. ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ¢ãƒ‡ãƒ«ã‚’`/opt/homebrew/share/tessdata`ã«ç§»å‹•ã™ã‚‹
```bash
% mv ~/Downloads/*.traineddata /opt/homebrew/share/tessdata
```
4. æ—¥æœ¬èªãŒè¿½åŠ ã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèªã™ã‚‹
```bash
% tesseract --list-langs|clipcopy

List of available languages in "/opt/homebrew/share/tessdata/" (5):
eng
jpn
jpn_vert
osd
snum
```
## 4. OCRã‚’å®Ÿè¡Œã™ã‚‹
å®Ÿè¡Œã™ã‚‹ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«
![](/images/ocr.jpg)
*ocr.jpg*
```bash
% tesseract <input> <output> -l lang_code
```
* `<output>`ã¯`-`ã‚’æŒ‡å®šã™ã‚‹ã¨æ¨™æº–å‡ºåŠ›ã«å‡ºåŠ›ã•ã‚Œã‚‹
* `lang_code`ã¯è¨€èªã‚³ãƒ¼ãƒ‰ã‚’æŒ‡å®šã™ã‚‹(æ—¥æœ¬èªã¯**jpn**)

```bash
% tesseract ocr.jpg - -l jpn

å½“åˆ äºŒ å¤§ ä¼š ã™ã¹ ã¦ ã€Œ ãƒ‡ ã‚£ ãƒ• ã‚§ ãƒ³ ãƒ‡ã‚£ ãƒ³ã‚° ãƒãƒ£ ãƒ³ ãƒ” ã‚ª ãƒ³ ã€ ã® è³‡æ ¼ ã§ å‡ºå ´ ã™ã‚‹ äºˆå®š ã  ã£ ãŸ å®‰ æ´—
ç¨¼ãŒ ä¸å‚åŠ  ã‚’ æ±ºã‚ ãŸ ç†ç”± ã¨ ã— ã¦ æç¤º ã— ãŸ ã® ã¯ è† ã¨ è¶³é¦– ã® è² å‚· ã  ã€‚ å®‰ æ´— æ²¿ ã¯ æ˜¨å¹´ 1 0 æœˆ æ­å·
ã‚¢ã‚¸ ã‚¢ ç«¶ æŠ€ å¤§ ä¼š ã§ å³ è† ã® è² å‚· ã§ é•·ã„ é–“ ãƒª ãƒãƒ“ ãƒª ã‚’ è¡Œã£ ã¦ ããŸ ã€‚ ã• ã‚‰ ã« æœ€è¿‘ é–‰å¹• ã— ãŸ ãƒ‘ãƒª äº”
è¼ª ã‚’ æ§ãˆ ã¦ å¤§ ä¼š é–‹å¹• ç›´å‰ ã« è¶³é¦– ã® ç­‹ ã‚’ è² å‚· ã— ãŸ ã€‚

ãŸ ã  ã— ã€ å®‰ æ´— æ²¿ ã¯ ã“ã‚Œ ã¨ ã„ã† ç•°å¸¸ ç—‡çŠ¶ ãª ã äº”è¼ª æ—¥ ç¨‹ ã‚’ å®Œèµ° ã— ã€ å¥³ å­ ã‚· ãƒ³ã‚° ãƒ«ã‚¹ ã« é‡‘ãƒ¡ãƒ€ãƒ«
ã¾ã§ ã‚‚ ãŸ ã‚‰ã— ãŸ ã€‚ å›½éš› å¤§ ä¼š ä¸å‚åŠ  ã® æ±ºå®š ã« é–¢é€£ ã— ã€ é‡‘ ãƒ¡ãƒ€ ãƒ« ä»¥ é™ ã« å‡ºã— ãŸ ç™ºè¨€ ã¨ ãã‚Œ ã« ã¨
ã‚‚ ãª ã† å¾Œ ç¶š çŠ¶æ³ ãŒ å½±éŸ¿ ã‚’ åŠã¼ ã— ãŸ ã¨ ã„ã† åˆ† æ ã‚‚ å‡º ã¦ ã„ã‚‹ ã€‚ ãƒ‘ ãƒª äº” è¼ª ã§ å…¥è³ ã— ãŸ å¤§ éŸ“ æ°‘å›½ é¸
æ‰‹ å›£ ãƒ¡ãƒ€ ãƒªã‚¹ ãƒˆ ã® ã†ã¡ ã€ ã ã® å¾Œ é–‹ ã‹ ã‚Œã‚‹ å›½ ãƒ» å†… å¤– ã® å¤§ ä¼š æ—¥ ç¨‹ ã« ä¸å‚åŠ  ã‚’ æ±ºã‚ ãŸ ã® ã¯ ç¾åœ¨ ã¾
ã§ ã¯ å®‰ æ´— å¸¸ ãŒ å”¯ä¸€ ã  ã€‚
```
æ­£ç¢ºã«èªè­˜ã§ãã¦ã„ã‚‹

## å¤‰å‰‡ãªç”»åƒ
![](/images/sagaih.jpg)
*sagaih.jpg*
```bash
% tesseract sagaih.jpg - -l jpn

Detected 9 diacritics
ã‚ã‚Š ãŒ ã¨ ã† ã‚’ å¼· ã• ã« å¤‰ãˆ ã¦ åŒ—éƒ¨ ä¹å· ç·ä½“ 2024

ã‚¤ãƒ³ ã‚¿ãƒ¼ ãŒ ãƒ‘ã‚¤
ä½ è³€ SS åŒº ã‚‚ ã£

KYUSHU, SAGA
```

**ãƒ“ãƒŸãƒ§ã€œã«èªè­˜ã§ãã¦ã„ãªã„**
# Pythonã§å®Ÿè¡Œ
```bash
% pip install pytesseract
% pip install Pillow
```
```python
import pytesseract
from PIL import Image
import os

str_img=Image.open('ocr.jpg')
str=pytesseract.image_to_string(str_img,lang='jpn')
print(str)
```

# å‚è€ƒ
https://qiita.com/aspiratio/items/be5c23ca06f4911bff56
https://qiita.com/seigot/items/7d424000c8d35e5146e4#%E7%B8%A6%E6%9B%B8%E3%81%8D%E3%81%AE%E5%A0%B4%E5%90%88
https://dev.classmethod.jp/articles/ocr-on-a-mac-device-with-pytesseract/